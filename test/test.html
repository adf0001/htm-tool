<html>
<head>
<meta charset='utf-8'>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes" />

<script src='../htm-tool.js' htm-tool-var-name='ht'></script>

</head>
<body onload="onBodyLoad()">

<table style='width:100%;'><tr>
	<td onclick="onClickItem(arguments[0])" id='spCmdList' valign='top' style='width:45%;'>
	</td>
	<td valign='top' style='width:45%;'>
		name<br>
		<input id='inpName' type='text' readonly style='background:#eee;'></input><br>
		code<br>
		<textarea id='txtCode' wrap='off' style="width:95%;height:10em;"></textarea><br>
		<button onclick="runItem()" id='btnRun'>run</button>
		<hr>
		<div id='divResult'></div>
		<div id='divResult2'></div>
		<div id='divResult3'></div>
	</td>
</tr></table>

</body>
<script>
	
	var itemSet={
		"ele()": "ht.ele('divResult')===document.getElementById('divResult') && \n\tht.ele(document.getElementById('divResult'))===document.getElementById('divResult')",
		"eleFromId()": "ht.eleFromId('divResult')===document.getElementById('divResult')",
		"eleId()": "ht('divResult2').innerHTML='<span>child</span>';\nalert( 'new id= ' + ht.eleId(ht('divResult2').firstChild)+', new id2= '+ht.eleId() );\nht('divResult2').firstChild.id && \n\tht.eleId(document.getElementById('divResult2'))==='divResult2';",
		"eleSibling()": "ht.eleSibling(ht('divResult2'),1)===ht('divResult3') &&" +
						"\n\tht.eleSibling(ht('divResult3'),-1)===ht('divResult2')",
		"dateString19()": "ht.dateString19(new Date(2000,1,3,4,5,6))==='2000-02-03 04:05:06'",
		"dateString14()": "ht.dateString14(new Date(2000,1,3,4,5,6))==='20000203040506'",
		"dateDiffStr()": "ht.dateDiffStr(new Date(2000,1,3,4,5,6),new Date(2000,1,4,5,6,7))==='1天1时1分' &&" +
							"\n\tht.dateDiffStr(new Date(2000,1,3,4,5,6),new Date(2000,1,4,5,6,7),1)==='1d 1h 1m' &&"+
							"\n\tht.dateDiffStr(new Date(2000,1,4,5,6,7),new Date(2000,1,3,4,5,6))==='-1天1时1分' &&" +
							"\n\tht.dateDiffStr(new Date(2000,1,4,5,6,7),new Date(2000,1,3,4,5,6),1)==='-1d 1h 1m'",
		"addCssText()":	"ht.addCssText('#divResult3{height:200px}');\n"+
						"ht('divResult3').offsetHeight===200;",
		"addCssText()/styleId":	"ht.addCssText('#divResult3 span.si{background:yellow;}','myStyle1');\n"+
						"ht('divResult3').innerHTML='<span class=si>aaa</span> <span class=si>bbb</span>';\n"+
						"\"<span class='ht-cmd' onclick=\\\"ht('myStyle1').textContent='#divResult3 span.si{background:red;}'\\\">red</span> \"+\n"+
						"\"<span class='ht-cmd'  onclick=\\\"ht.addCssText('#divResult3 span.si{background:blue;}','myStyle1')\\\">blue</span>\"",
		"appendHtml()":
						"var a=ht.appendHtml('divResult3','<span>aa</span> <span>bb</span> ');\n"+
						"a.textContent=='aa' \n"
						,
		"appendBodyHtml()":
						"var a=ht.appendBodyHtml('<span>aa</span> <span>bb</span> ');\n"+
						"a.textContent=='aa' \n"
						,
		"querySelectorByAttr()":
						"ht('divResult3').innerHTML='<span myattr=11>aaa</span> <span myattr=22>bbb</span> <b myattr=22>ccc</b> <b myattr=22>ddd</b>';\n"+
						"ht.querySelectorByAttr('divResult3','','myattr').getAttribute('myattr')==='11' && \n" +
						"ht.querySelectorByAttr('divResult3','','myattr','22').textContent==='bbb' && \n" +
						"ht.querySelectorByAttr('divResult3','b','myattr','22').textContent==='ccc' && \n" +
						"ht.querySelectorByAttr('divResult3','b','myattr','22',':nth-of-type(2)').textContent==='ddd'  \n" 
						,
		"queryByName()":
						"ht('divResult3').innerHTML='\\\n"+
							"\t<span name=a>aaa</span> \\\n"+
							"\t<span name=b>bbb \\\n"+
								"\t\t<span name=c>ccc</span> \\\n"+
								"\t\t<span name=a>aaa2</span> \\\n"+
								"\t\t<span name=d>ddd \\\n"+
									"\t\t\t<span>no-name \\\n"+
										"\t\t\t\t<span name=e>eee</span> \\\n"+
									"\t\t\t</span>\\\n"+
								"\t\t</span>\\\n"+
							"\t</span>\\\n"+
							"\t<span>no-name \\\n"+
								"\t\t<span name=c>ccc2</span> \\\n"+
							"\t</span>\\\n"+
						"\t';\n"+
						"\n"+
						"ht.queryByName('divResult3','a').textContent==='aaa' && \n" +
						"ht.queryByName('divResult3','c').textContent==='ccc' && \n" +
						"ht.queryByName('divResult3','c',true).textContent==='ccc2' && 	//strict mode\n" +
						"ht.queryByName('divResult3','.c').textContent==='ccc2' && 	//strict mode\n" +
						"ht.queryByName('divResult3','b.c').textContent==='ccc' && 	//strict mode\n" +
						"ht.queryByName('divResult3',['b','c']).textContent==='ccc' && \n" +
						"ht.queryByName('divResult3',['b','a']).textContent==='aaa2' && \n" +
						"\n"+
						"ht.queryByName('divResult3','e').textContent==='eee' && \n" +
						"ht.queryByName('divResult3','d.e',false).textContent==='eee' && \n" +
						"ht.queryByName('divResult3','b.e',false).textContent==='eee' && \n" +
						"ht.queryByName('divResult3','e',true)===null && 	//strict mode\n" +
						"ht.queryByName('divResult3','d.e')===null && 	//strict mode\n" +
						"ht.queryByName('divResult3','b.e')===null && 	//strict mode\n" +
						"ht.queryByName('divResult3','b.d.e').textContent==='eee' 	//strict mode\n" 
						,
		"getSearchPart()":	"ht.getSearchPart('a','?aa=1&a=2') ==='2' && \n" +
							"ht.getSearchPart('aa','?aa=1&a=2') ==='1' && \n" +
							"ht.getSearchPart('a','?aa=1&a=2&cc=3') ==='2' && \n" +
							"ht.getSearchPart('d','?aa=1&a=2&cc=3') ===null",
		"deriveObject":
						"var a= {\n"+
							"\tf1: function(){return 1;},\n"+
							"\tf2: function(){return 2;},\n"+
						"};\n"+
						"var b= {\n"+
							"\tf3: function(){return 3;},\n"+
							"\tf4: function(){return 4;},\n"+
						"};\n"+
						"var c= ht.deriveObject( a, b, {\n"+
							"\tf2: function(){return 22;},\n"+
							"\tf3: function(){return 33;},\n"+
						"});\n"+
						"\n"+
						"c.f1()===1 && c.f2()===22 && c.f3()===33 && c.f4()===4 && \n" +
						"\t('f1' in c) && !c.hasOwnProperty('f1') && c.hasOwnProperty('f4') && \n" +
						"\ta.isPrototypeOf(c) && !b.isPrototypeOf(c)\n" 
						,
		
		"httpRequest()":
						"ht.httpRequest('http://myip.ipip.net','GET','',\n"+
							"\tfunction(error,data){ht('divResult2').textContent= error?JSON.stringify(error):data.responseText; setOk('httpRequest()'); }\n"+
						");",
		"httpRequestJson()":
						"ht.httpRequestJson('http://myip.ipip.net/json','GET','',\n"+
							"\tfunction(error,data){ht('divResult2').textContent=JSON.stringify(error?error:data.json); setOk('httpRequestJson()'); }\n"+
						");",
		"css.ht-cmd":
						"\"<span class='ht-cmd'>cmd .ht-cmd style sample</span>\"",
		"css.ht-hover":
						"\"<span class='ht-hover'>cmd .ht-hover style sample</span>\"",
		"css.ht-selected/setSelected()":
						"\"<span class='ht-selected'>cmd .ht-selected style sample</span>\\\n"+
						"<div><span>111 </span><span>222 </span><span>333 </span><span>444 </span><label><input type=checkbox onchange='ht.setSelected([parentNode.parentNode.childNodes[0],parentNode.parentNode.childNodes[2]],[parentNode.parentNode.childNodes[1],parentNode.parentNode.childNodes[3]],this.checked);'></input>toggle</label></div>\"",
		"tab-control":
						"ht('divResult2').innerHTML=\n"+
						"\"<div class='ht-tab-group'>\\\n"+
							"\t<span class='ht-tab-item ht-tab-item-selected' id='spTab1' onclick=\\\"ht.selectTabItem('top','spTab1','divTab1')\\\">Tab1</span>\\\n"+
							"\t<span class='ht-tab-item' id='spTab2' onclick=\\\"ht.selectTabItem('top','spTab2','divTab2')\\\">Tab2</span>\\\n"+
						"</div>\\\n"+
						"<div id='divTab1'><b>tab1 content</b></div>\\\n"+
						"<div id='divTab2' style='display:none;'><i>tab2 content</i></div>\\\n"+
						"\"\n\n"+
						"ht('spTab1').click();\n"+
						"'ui test'"
						,
		"showLog()":
						"ht.showLog('some log message');\n'log ui'",
		"startDrag()":
						"\"<span style='position:relative;border:1px solid gray;' id='spDrag1' onmousedown='ht.startDrag( arguments[0], this )' ontouchstart='ht.startDrag( arguments[0], this )'>drag 1</span> \\\n"+
						"<span style='position:relative;border:1px solid gray;' id='spDrag2' onmousedown=\\\"ht.startDrag( arguments[0], this )\\\" ontouchstart=\\\"ht.startDrag( arguments[0], this )\\\">drag 2</span> \\\n"+
						"<span style='position:relative;border:1px solid gray;' id='spDrag3' onmousedown=\\\"ht.startDrag( arguments[0], this, ht('spDrag1'), ht('spDrag2') )\\\" ontouchstart=\\\"ht.startDrag( arguments[0], this, ht('spDrag1'), ht('spDrag2') )\\\">drag 3</span>\""
						,
		"dragObject/derive":
						"myDragObject= ht.deriveObject( ht.dragObject, {\n"+
							"\tel1:null,\n"+
							"\tstart: function ( evt, el1){\n"+
								"\t\tht.dragObject.start.apply( this, arguments );\n"+
								"\t\tthis.el1=el1;\n"+
								"\t\tthis.el1.style.background='lime';\n"+
							"\t},\n"+
							"\t\n"+
							"\tonStop: function ( evt ) {\n"+
								"\t\tht.dragObject.onStop.apply( this, arguments );\n"+
								"\t\tthis.el1.style.background='';\n"+
							"\t},\n"+
							"\t\n"+
							"\tonMove: function (evt) {\n"+
								"\t\tht.dragObject.onMove.apply( this, arguments );\n"+
								"\t\tthis.el1.textContent=this.el1.offsetLeft+','+this.el1.offsetTop;\n"+
							"\t},\n"+
						"});\n"+
						"myDragObject.init();\n"+
						"\n"+
						"\"<span style='position:relative;border:1px solid gray;' id='spDrag1' onmousedown='myDragObject.start( arguments[0], this )' ontouchstart='myDragObject.start( arguments[0], this )'>drag 1</span> \\\n"+
						"<span style='position:relative;border:1px solid gray;' id='spDrag2' onmousedown=\\\"myDragObject.start( arguments[0], this )\\\" ontouchstart=\\\"myDragObject.start( arguments[0], this )\\\">drag 2</span> \\\n"+
						"<span style='position:relative;border:1px solid gray;' id='spDrag3' onmousedown=\\\"myDragObject.start( arguments[0], this, ht('spDrag1'), ht('spDrag2') )\\\" ontouchstart=\\\"myDragObject.start( arguments[0], this, ht('spDrag1'), ht('spDrag2') )\\\">drag 3</span>\""
						,
		"showPopup()/hidePopup()":
						"ht('divResult2').innerHTML=\n"+
						"\"<div id='divPopup1' class='ht-popup' style='display:none;'>\\\n" +
							"\t<div class='ht-popup-body' onmousedown='ht.startDrag( arguments[0], this )' ontouchstart='ht.startDrag( arguments[0], this )'>\\\n"+
								"\t\tpopup-1<hr>This is popup-1.\\\n"+
							"\t</div>\\\n"+
						"</div>\\\n" +
						"<div id='divPopup2' class='ht-popup' style='display:none;'>\\\n" +
							"\t<div class='ht-popup-body' onmousedown='ht.startDrag( arguments[0], this )' ontouchstart='ht.startDrag( arguments[0], this )'>\\\n"+
								"\t\tpopup-2<hr>This is popup-2, modal. <br> \\\n"+
									"\t\t\t<span class='ht-cmd' onclick=\\\"ht.showPopup('divPopup1')\\\">popup1</span> <br> \\\n"+
									"\t\t\t<span class='ht-cmd' onclick=\\\"ht.showPopup('divPopup2',1)\\\">popup2</span>, will fail <br> \\\n"+
									"\t\t\t<span class='ht-cmd' onclick=\\\"ht.showPopup('divPopup3',1)\\\">popup3</span>, maybe fail <br> \\\n"+
								"\t\t<center><button onclick=\\\"ht.hidePopup('divPopup2')\\\">close</button></center>\\\n"+
							"\t</div>\\\n"+
						"</div>\\\n" +
						"<div id='divPopup3' class='ht-popup' style='display:none;'>\\\n" +
							"\t<div class='ht-popup-body' onmousedown='ht.startDrag( arguments[0], this )' ontouchstart='ht.startDrag( arguments[0], this )'>\\\n"+
								"\t\tpopup-3<hr>This is popup-3, stack. <br> \\\n"+
									"\t\t\t<span class='ht-cmd' onclick=\\\"ht.showPopup('divPopup1')\\\">popup1</span> <br> \\\n"+
									"\t\t\t<span class='ht-cmd' onclick=\\\"ht.showPopup('divPopup2')\\\">popup2</span>, modaless, maybe fail <br> \\\n"+
									"\t\t\t<span class='ht-cmd' onclick=\\\"ht.showPopup('divPopup3',1)\\\">popup3</span>, will fail <br> \\\n"+
								"\t\t<center><button onclick=\\\"ht.hidePopup('divPopup3','fromClose')\\\">close</button></center>\\\n"+
							"\t</div>\\\n"+
						"</div>\\\n" +
						"<button id='btnOpenPopup1' onclick=\\\"ht.showPopup('divPopup1')\\\">popup-1</button> \\\n"+
						"<button id='btnOpenPopup2' onclick=\\\"ht.showPopup('divPopup2',1)\\\">popup-2, modal</button> \\\n"+
						"<button id='btnOpenPopup3' onclick=\\\"ht.showPopup('divPopup3',1,function(err,data){if(err||data)alert('popup3 at btn returned: error='+err+', data='+data);})\\\">popup-3, stack</button> \\\n"+
						"\"\n\n"+
						"ht('btnOpenPopup1').click();\n"+
						"'ui test'"
						,
		"showPopupHtml()":
						"ht('divResult2').innerHTML=\n"+
						"\"<label><input id='chkModaless' type='checkbox' checked></input>modal / default</label><br>\\\n"+
						"<button id='btnOpenPopup1' onclick=\\\"ht.showPopupHtml('title-1<hr>message-1',ht('chkModaless').checked)\\\">showPopupHtml()</button> \\\n"+
						"<button id='btnOpenPopup2' onclick=\\\"ht.alert('message-2',ht('chkModaless').checked )\\\">alert()</button> \\\n"+
						"<button id='btnOpenPopup3' onclick=\\\"ht.confirm('message-3',ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\">confirm()</button> \\\n"+
						"<button id='btnOpenPopup4' onclick=\\\"ht.confirmYnc('message-4',ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\">confirmYnc()</button> \\\n"+
						"<button id='btnOpenPopup5' onclick=\\\"ht.prompt('message-5','default-value',ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\">prompt()</button> \\\n"+
						
						"<button id='btnOpenPopupS' onclick=\\\"ht.showPopupHtml(popupHtmlStackHtml+'<br>'+(new Date()),ht('chkModaless').checked)\\\">showPopupHtml-stack</button> \\\n"+

						"<button id='btnOpenPopupSelect' onclick=\\\"ht.selectRadioList('select message 1',['aaa',['bbb','文本bbb'],'ccc'],'bbb',ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\">selectRadioList()</button> \\\n"+
						"<button id='btnOpenPopupSelect-2' onclick=\\\"ht.selectRadioList('select message 1',['aaa',['bbb','文本bbb'],'ccc'],'',ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\" title='if select void, exception raise and stop the process'>selectRadioList()-2/void</button> \\\n"+
						"<button id='btnOpenPopupSelect2' onclick=\\\"ht.selectCheckboxList('select message 2',['aaa',['bbb','文本bbb'],'ccc'],['bbb','ccc'],ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\">selectCheckboxList()</button> \\\n"+
						"<button id='btnOpenPopupSelect2-2' onclick=\\\"ht.selectCheckboxList('select message 2',['aaa',['bbb','文本bbb'],'ccc'],null,ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\" title='if select void, return empty list'>selectCheckboxList()-2/void</button> \\\n"+
						"<button id='btnOpenPopupSelect2-3' onclick=\\\"ht.selectCheckboxList('select message 2',['aaa',['bbb','文本bbb 文本bbb 文本bbb 文本bbb 文本bbb 文本bbb 文本bbb 文本bbb 文本bbb 文本bbb '],'ccc','ccc2','ccc3','ccc4','ccc5','ccc6','ccc7','ccc8','ccc9','ccc10','ccc11','ccc12','ccc13','ccc14'],['bbb','ccc'],ht('chkModaless').checked,function(err,data){if(err||data)alert('returned: error='+err+', data='+data);})\\\">selectCheckboxList()-3</button> \\\n"+

						"\";\n\n"+
						
						"window.popupHtmlStackHtml= \"title-S<hr>message-S <span class='ht-cmd' onclick='openPopupHtmlStack()'>open another</span>\";\n\n"+
						"window.openPopupHtmlStack= function(){ht('btnOpenPopupS').click();};\n\n"+
						"'ui test'"
						,
	};
	
	function runItem(){
		try{
			var ret= eval(ht('txtCode').value);
		}
		catch(ex){
			console.log(ex);
			ht('divResult').textContent= ex;
			return;
		}
		ht('divResult').innerHTML= ht.dateString19(new Date()).slice(-8) + " / " + ht('inpName').value + "<br>" + ret;
		
		return ret;
	}
	
	function onClickItem(evt){
		var el= evt.target;
		if( ! el.tagName=="SPAN" || el.className.indexOf("ht-cmd")<0 ) return;
		
		var name= el.textContent;
		if( !itemSet[name] ) return;
		ht('inpName').value= name;
		ht('txtCode').value= itemSet[name];
		ht('divResult').innerHTML= "";
		ht('divResult2').innerHTML= "";
		ht('divResult3').innerHTML= "";
		
		if( runItem() ) setOk(name);
	}
	
	function onBodyLoad(){
		ht('spCmdList').innerHTML=  Object.keys(itemSet).map( function(v){return "\n<span class='ht-cmd' name=\""+v+"\">" +v+"</span>";});
	}
	
	function setOk(name){
		ht('spCmdList').querySelector("span[name='"+name+"']").style.background="lime";
	}
	
</script>
</html>

